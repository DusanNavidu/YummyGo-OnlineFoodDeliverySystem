<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Item Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Epunda+Slab:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/Style.css">
    <style>
        .item-card {
            height: 400px; /* fix height for all cards */
            display: flex;
            flex-direction: column;
        }

        .item-description {
            max-height: 100px; /* description box height */
            overflow-y: auto; /* scroll if text is too long */
        }
        .item-card:hover {
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        #business-profile{
            margin-top: 100px;
            position: relative;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark position-fixed top-0 start-0 w-100 z-1">
        <div class="container-fluid">
            <a class="navbar-brand ps-5" href="#"><span class="fw-bold fs-3 text-light">YUMMY</span><span class="fs-3 fw-bold text-warning">GO</span> </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Features</a>
                    </li>
                    <li class="nav-item">
                        <button class="btn btn-dark" id="logoutBtn">
                            Logout
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div id="business-profile" class="container p-3 rounded-3 shadow d-flex align-items-center gap-4">
        <div id="business-logo-profile" class="img-fluid"></div>
        <div>
            <h1 id="business-name-profile"></h1>
            <p class="d-flex"><img src="/assets/logo/maps-and-flags.png" alt="" style="width: 20px; height: 20px;"> Near Me <span class="ps-1" id="business-location-profile"></span></p>
            <p><span id="business-open-time-profile"></span> to <span id="business-close-time-profile"></span></p>
            <p><span id="business-contact1-profile"></span> | <span id="business-contact2-profile"></span></p>
        </div>
    </div>

    <div class="container pt-5">
        <button class="btn btn-dark p-5" id="openAddItemModalBtn" data-bs-toggle="modal" data-bs-target="#Business-Item-Add-Modal">
            <span class="fw-bold fs-1">+</span><br>Add Business Item
        </button>
    </div>

    <div class="container mt-2">
        <h3>Business Items</h3>
        <div class="container text-center">
            <div id="business-items-container" class="row g-3"></div>
        </div>
    </div>

    <!-- Add Business Item Modal -->
    <div class="modal fade" id="Business-Item-Add-Modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Business Item</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="add-item-form">
                    <div class="modal-body">
                        <input type="hidden" id="businessId" name="businessId">
                        <input type="text" id="business-item-name" class="form-control mb-3" placeholder="Enter item name">
                        <input type="text" id="business-item-price" class="form-control mb-3" placeholder="Enter item price">
                        <input list="categories" id="business-item-category" class="form-control mb-3" placeholder="Type or select category from the list">
                        <datalist id="categories">
                            <option>Biryani</option>
                            <option>Pizza</option>
                            <option>Burger</option>
                            <option>Sandwich</option>
                            <option>Fried Chicken</option>
                            <option>Rolls & Wraps</option>
                            <option>Thali</option>
                            <option>Dosa</option>
                            <option>Idli</option>
                            <option>Paratha</option>
                            <option>North Indian</option>
                            <option>South Indian</option>
                            <option>Sri Lankan</option>
                            <option>Chinese</option>
                            <option>Thai</option>
                            <option>Japanese</option>
                            <option>Korean</option>
                            <option>Italian</option>
                            <option>Mexican</option>
                            <option>Arabian</option>
                            <option>Shawarma</option>
                            <option>Kebab</option>
                            <option>Seafood</option>
                            <option>Fish</option>
                            <option>Crab</option>
                            <option>Prawns</option>
                            <option>Noodles</option>
                            <option>Rice</option>
                            <option>Fried Rice</option>
                            <option>Biriyani Bowls</option>
                            <option>Curry</option>
                            <option>Salads</option>
                            <option>Soups</option>
                            <option>Pasta</option>
                            <option>Steaks</option>
                            <option>BBQ</option>
                            <option>Grill</option>
                            <option>Healthy Meals</option>
                            <option>Vegan</option>
                            <option>Vegetarian</option>
                            <option>Breakfast</option>
                            <option>Brunch</option>
                            <option>Bakery</option>
                            <option>Cakes</option>
                            <option>Pastries</option>
                            <option>Donuts</option>
                            <option>Ice Cream</option>
                            <option>Sweets</option>
                            <option>Juices</option>
                            <option>Smoothies</option>
                            <option>Coffee</option>
                            <option>Tea</option>
                            <option>Milkshakes</option>
                            <option>Soft Drinks</option>
                            <option>Mocktails</option>
                            <option>Alcoholic Beverages</option>
                            <option>Snacks</option>
                            <option>Street Food</option>
                            <option>Fast Food</option>
                            <option>Combo Meals</option>
                            <option>Kids Meals</option>
                            <option>Family Packs</option>
                        </datalist>

                        <textarea id="item-description" class="form-control mb-3" placeholder="Enter item description"></textarea>

                        <div class="mb-3">
                            <label>Item Availability</label><br>
                            <button type="button" id="availability-btn" class="btn btn-success form-control">Available</button>
                            <input type="hidden" id="availability-value" value="Available">
                        </div>

                        <div id="drop-area" style="border: 2px dashed #ccc; padding: 20px; text-align: center; cursor: pointer;">
                            <p>Drag & Drop your image here or click to select</p>
                            <input type="file" id="fileElem" accept="image/*" style="display:none;">
                            <img id="preview" style="max-width:100%; margin-top:10px; display:none;">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="reset" class="btn btn-info" id="resetBtn">Reset Form</button>
                        <button type="submit" class="btn btn-success" id="submitItemBtn">Add Item</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Item edit modal -->
    <div class="modal fade" id="editItemModal" tabindex="-1" aria-labelledby="editItemModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editItemModalLabel">Edit Item</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="edit-item-form">
                    <div class="modal-body">
                        <input type="hidden" id="editbusinessId" name="businessId">
                        <input type="text" id="edit-business-item-name" class="form-control mb-3" placeholder="Enter item name">
                        <input type="text" id="edit-business-item-price" class="form-control mb-3" placeholder="Enter item price">
                        <input list="categories" id="edit-business-item-category" class="form-control mb-3" placeholder="Type or select category from the list">
                        <datalist id="categories">
                            <option>Biryani</option>
                            <option>Pizza</option>
                            <option>Burger</option>
                            <option>Sandwich</option>
                            <option>Fried Chicken</option>
                            <option>Rolls & Wraps</option>
                            <option>Thali</option>
                            <option>Dosa</option>
                            <option>Idli</option>
                            <option>Paratha</option>
                            <option>North Indian</option>
                            <option>South Indian</option>
                            <option>Sri Lankan</option>
                            <option>Chinese</option>
                            <option>Thai</option>
                            <option>Japanese</option>
                            <option>Korean</option>
                            <option>Italian</option>
                            <option>Mexican</option>
                            <option>Arabian</option>
                            <option>Shawarma</option>
                            <option>Kebab</option>
                            <option>Seafood</option>
                            <option>Fish</option>
                            <option>Crab</option>
                            <option>Prawns</option>
                            <option>Noodles</option>
                            <option>Rice</option>
                            <option>Fried Rice</option>
                            <option>Biriyani Bowls</option>
                            <option>Curry</option>
                            <option>Salads</option>
                            <option>Soups</option>
                            <option>Pasta</option>
                            <option>Steaks</option>
                            <option>BBQ</option>
                            <option>Grill</option>
                            <option>Healthy Meals</option>
                            <option>Vegan</option>
                            <option>Vegetarian</option>
                            <option>Breakfast</option>
                            <option>Brunch</option>
                            <option>Bakery</option>
                            <option>Cakes</option>
                            <option>Pastries</option>
                            <option>Donuts</option>
                            <option>Ice Cream</option>
                            <option>Sweets</option>
                            <option>Juices</option>
                            <option>Smoothies</option>
                            <option>Coffee</option>
                            <option>Tea</option>
                            <option>Milkshakes</option>
                            <option>Soft Drinks</option>
                            <option>Mocktails</option>
                            <option>Alcoholic Beverages</option>
                            <option>Snacks</option>
                            <option>Street Food</option>
                            <option>Fast Food</option>
                            <option>Combo Meals</option>
                            <option>Kids Meals</option>
                            <option>Family Packs</option>
                        </datalist>

                        <textarea id="edit-item-description" class="form-control mb-3" placeholder="Enter item description"></textarea>

                        <div class="mb-3">
                            <label>Item Availability</label><br>
                            <button type="button" id="edit-availability-btn" class="btn btn-success form-control">Available</button>
                            <input type="hidden" id="edit-availability-value" value="Available">
                        </div>

                        <div id="edit-drop-area" style="border: 2px dashed #ccc; padding: 20px; text-align: center; cursor: pointer;">
                            <p>Drag & Drop your image here or click to select</p>
                            <input type="file" id="edit-fileElem" accept="image/*" style="display:none;">
                            <img id="edit-preview" style="max-width:100%; margin-top:10px; display:none;">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="reset" class="btn btn-info" id="resetBtn">Reset Form</button>
                        <button type="submit" class="btn btn-success" id="editItemBtn">Add Item</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // ---------- Add Item Modal Image Upload ----------
    const fileElem = document.getElementById("fileElem");
    const dropArea = document.getElementById("drop-area");
    const preview = document.getElementById("preview");

    dropArea.addEventListener("click", () => fileElem.click());

    fileElem.addEventListener("change", (e) => handleFile(e.target.files[0], preview));

    dropArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        dropArea.style.borderColor = "green";
    });

    dropArea.addEventListener("dragleave", () => {
        dropArea.style.borderColor = "#ccc";
    });

    dropArea.addEventListener("drop", (e) => {
        e.preventDefault();
        dropArea.style.borderColor = "#ccc";
        const file = e.dataTransfer.files[0];
        handleFile(file, preview);
    });

    // ---------- Edit Item Modal Image Upload ----------
    const editFileElem = document.getElementById("edit-fileElem");
    const editDropArea = document.getElementById("edit-drop-area");
    const editPreview = document.getElementById("edit-preview");

    editDropArea.addEventListener("click", () => editFileElem.click());

    editFileElem.addEventListener("change", (e) => handleFile(e.target.files[0], editPreview));

    editDropArea.addEventListener("dragover", (e) => {
        e.preventDefault();
        editDropArea.style.borderColor = "green";
    });

    editDropArea.addEventListener("dragleave", () => {
        editDropArea.style.borderColor = "#ccc";
    });

    editDropArea.addEventListener("drop", (e) => {
        e.preventDefault();
        editDropArea.style.borderColor = "#ccc";
        const file = e.dataTransfer.files[0];
        handleFile(file, editPreview);
    });

    // ---------- Common Preview Handler ----------
    function handleFile(file, previewElement) {
        if (file && file.type.startsWith("image/")) {
            const reader = new FileReader();
            reader.onload = (e) => {
                previewElement.src = e.target.result;
                previewElement.style.display = "block";
            };
            reader.readAsDataURL(file);
        } else {
            alert("Please select a valid image file");
        }
    }
    </script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/businessItemDashboard.js"></script>
</body>
</html>
